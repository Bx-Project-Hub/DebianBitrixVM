# **Главное меню**
![Главное меню](images/main_menu.png)

# **Информация**
Меню для управления окружением Bitrix, адаптированное для **Debian 11 / Debian 12**.  
Основано на проекте [(YogSottot) bitrix-gt](https://github.com/YogSottot/bitrix-gt), доработано и оптимизировано для **современных версий Debian 11-12 и Bitrix**.

---

# **Возможности окружения**
- Полная автоматическая установка всех необходимых компонентов:  
  **Ansible, PHP 8.2 (по умолчанию), MySQL 8.0, Nginx, Apache, Redis, Push & Pull сервер.**
- Поддержка **композита**.
- Отдача статики **через Brotli**.
- Возможность **использовать собственные конфигурации Nginx**, не изменяя стандартные.
- Поддержка **полнотекстового поиска Sphinx**.
- Возможность **установки сервера конвертации документов (`unoconv`, `ImageMagick`)**.
- Возможность **установки и мониторинга Netdata**.

---

# **Возможности меню**
- Просмотр списка сайтов.
- Создание и удаление сайтов в режимах **ядра и символической ссылки**.
- Автоматический перевод агентов на **CRON** при создании сайта в режиме ядра.
- Выпуск **SSL-сертификатов Let’s Encrypt**.
- Управление редиректом **HTTP → HTTPS**.
- **Изменение версий PHP**.
- **Настройка SMTP** (глобально и индивидуально для каждого сайта).
- **Обновление, перезагрузка и выключение сервера** через меню.
- Информирование о выходе новой версии меню.
- Обновление меню **всего одной командой**:
  ```bash
  update_menu
  ```

---

# **Установка**
### ⚠ **Важно:** Устанавливать и использовать меню **только от root-пользователя**.

#### **Полная установка окружения на Debian 11 / Debian 12**
##### Установка через `CURL`
```bash
apt install -y curl wget && bash <(curl -sL https://raw.githubusercontent.com/Bx-Project-Hub/DebianBitrixVM/master/install_full_environment.sh)
```
##### Установка через `WGET`
```bash
apt install -y curl wget && bash <(wget -qO- https://raw.githubusercontent.com/Bx-Project-Hub/DebianBitrixVM/master/install_full_environment.sh)
```

---

# **Обновление меню**
Если вышла новая версия меню, обновить его можно **одной командой**:
```bash
update_menu
```
Меню также можно обновить вручную через `CURL` или `WGET`.  
При обновлении текущая версия **автоматически сохраняется в бэкапе** `/root/backup_vm_menu/ДД.ММ.ГГГГ ЧЧ:ММ:СС`.

#### **Обновление через `CURL`**
```bash
bash <(curl -sL https://raw.githubusercontent.com/Bx-Project-Hub/DebianBitrixVM/master/update_menu.sh)
```
#### **Обновление через `WGET`**
```bash
bash <(wget -qO- https://raw.githubusercontent.com/Bx-Project-Hub/DebianBitrixVM/master/update_menu.sh)
```

---

# **Использование**
Меню устанавливается в **`/root/vm_menu`**, а для удобства создаётся **символическая ссылка**:
- `/root/menu.sh` → `/root/vm_menu/menu.sh`

Можно запускать меню командами:
```bash
./menu.sh   # Если находишься в /root
/root/menu.sh   # Если находишься в любой другой директории
```
Также путь к меню **автоматически прописывается в `.profile`**, так что оно запускается сразу при подключении по **SSH**.

---

# **Настройки**
Меню гибко настраивается.  
Все параметры можно изменить в файле:
```bash
/root/vm_menu/bash_scripts/config.sh
```
По умолчанию там уже всё настроено, но при необходимости можно подстроить окружение под свои задачи.

---

# **Обновления и новые возможности**
![Обновление](images/new_version.png)

Меню автоматически **информирует о выходе новых версий**.  
Обновление можно выполнить командой:
```bash
update_menu
```
Если меню сломалось из-за экспериментов или изменений — просто **запусти обновление**, и оно **вернётся к рабочей версии**.

---

# **Поддержка, вопросы по локализации решений и шаблонов Битрикс на языки, предложения**
Если у вас есть вопросы или предложения, присоединяйтесь:
[**Telegram-чат поддержки**](https://t.me/bitrix_ferma)

